<div class="container">
  <header>
    <h1>âš½ Foot Match Balancer</h1>
    <p>CrÃ©ez des Ã©quipes Ã©quilibrÃ©es par poste et par niveau.</p>
  </header>

  <section class="card">
    <h2>Ajouter un joueur</h2>
    <div class="form-group-multi">
      <input [(ngModel)]="newPlayerName" placeholder="Nom">
      
      <div class="checkbox-group">
        @for (pos of availablePositions; track pos) {
          <label>
            <input type="checkbox" [(ngModel)]="selectedPositions[pos]"> {{pos}}
          </label>
        }
      </div>

      <!-- Le score reste lÃ  pour la logique, mais il est "secret" dans la liste -->
      <input type="number" [(ngModel)]="newPlayerScore" min="0" max="10" step="0.5" placeholder="Note">
      <button (click)="addPlayer()">Ajouter</button>
    </div>
  </section>

  <section class="card">
    <h2>Joueurs prÃ©sents ({{ playersPresent().length }})</h2>
    <div class="player-grid">
      @for (p of allPlayers(); track p.id) {
        <div class="player-tag" [class.active]="p.estPresent" (click)="togglePresence(p)">
          <span class="player-name">{{ p.nom }}</span>
          <!-- On affiche tous les postes du joueur -->
          <span class="player-pos">{{ p.positions.join(' / ') }}</span>
        </div>
      }
    </div>
    
    <div class="actions-gap">
      <button class="btn-generate" (click)="makeTeams()">
        GÃ‰NÃ‰RER Ã‰QUIPES (NIVEAU)
      </button>
      <button class="btn-reshuffle" (click)="shuffleByPositionOnly()">
        ðŸ”„ MÃ‰LANGER PAR POSTE (ALÃ‰ATOIRE)
      </button>
    </div>
  </section>

  @if (teams().team1.length > 0) {
    <div class="teams-container">
      <div class="team-card team-a">
        <h3>Ã‰quipe A</h3> <!-- Score moyen supprimÃ© -->
        <ul>
          @for (p of teams().team1; track p.id) {
            <li><strong>{{ p.positions[0] }} :</strong> {{ p.nom }}</li>
          }
        </ul>
      </div>
      <div class="team-card team-b">
        <h3>Ã‰quipe B</h3>
        <ul>
          @for (p of teams().team2; track p.id) {
            <li><strong>{{ p.positions[0] }} :</strong> {{ p.nom }}</li>
          }
        </ul>
      </div>
    </div>
  }

</div>