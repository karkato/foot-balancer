@if (isMaintenance()) {
  <!-- PAGE DE MAINTENANCE -->
  <div class="maintenance-screen">
    <div class="maintenance-card">
      <span class="icon">âš½</span>
      <h1>Team Balancer</h1>
      <div class="divider"></div>
      <p>Le vestiaire est actuellement fermÃ© pour travaux.</p>
      <p class="subtitle">On prÃ©pare la nouvelle version des Ã©quipes. Revenez trÃ¨s bientÃ´t !</p>
      <div class="status-badge">Statut : AmÃ©lioration en cours</div>
    </div>
  </div>
} @else {
  <div class="container">
  <header>
    <h1>âš½ Team Balancer</h1>
    <p>CrÃ©ez des Ã©quipes Ã©quilibrÃ©es par poste et par niveau.</p>
  </header>

  <section class="card">
    <h2>Ajouter un joueur</h2>
    <div class="form-group-multi">
      <input [(ngModel)]="newPlayerName" placeholder="Nom">
      
      <div class="checkbox-group">
        @for (pos of availablePositions; track pos) {
          <label>
            <input type="checkbox" [(ngModel)]="selectedPositions[pos]"> {{pos}}
          </label>
        }
      </div>

      <select [(ngModel)]="newPlayerScore">
    <option [value]="9">ğŸŒŸ Top Player</option>
    <option [value]="7">âœ… ConfirmÃ©</option>
    <option [value]="5">ğŸƒ Moyen</option>
    <option [value]="3">ğŸŒ± DÃ©butant / Loisir</option>
  </select>
      <button (click)="addPlayer()">Ajouter</button>
    </div>
  </section>

  <section class="card">
    <h2>Joueurs prÃ©sents ({{ playersPresent().length }})</h2>
    <div class="player-grid">
      @for (p of allPlayers(); track p.id) {
        <div class="player-tag" [class.active]="p.estPresent" (click)="togglePresence(p)">
          <span class="player-name">{{ p.nom }}</span>
          <!-- On affiche tous les postes du joueur -->
          <span class="player-pos">{{ p.positions.join(' / ') }}</span>
        </div>
      }
    </div>
    
    <div class="actions-gap">
      <button class="btn-generate" (click)="makeTeams()">
        GÃ‰NÃ‰RER Ã‰QUIPES (NIVEAU)
      </button>
      <button class="btn-reshuffle" (click)="shuffleByPositionOnly()">
        ğŸ”„ MÃ‰LANGER PAR POSTE (ALÃ‰ATOIRE)
      </button>
    </div>
  </section>

  @if (teams().team1.length > 0) {
    <div class="teams-container">
      <div class="team-card team-a">
        <h3>Ã‰quipe A</h3> <!-- Score moyen supprimÃ© -->
        <ul>
          @for (p of teams().team1; track p.id) {
            <li><strong>{{ p.positions[0] }} :</strong> {{ p.nom }}</li>
          }
        </ul>
      </div>
      <div class="team-card team-b">
        <h3>Ã‰quipe B</h3>
        <ul>
          @for (p of teams().team2; track p.id) {
            <li><strong>{{ p.positions[0] }} :</strong> {{ p.nom }}</li>
          }
        </ul>
      </div>
    </div>
  }

</div>
}
